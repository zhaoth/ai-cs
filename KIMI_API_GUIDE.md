# Kimi API 调用功能使用指南

## ✨ 新功能：真实 Kimi API 调用

### 🎯 功能概述

现在当您选择 Kimi 模型并点击发送按钮时，系统会：

1. **自动检测模型**：如果选择的是 Kimi，调用真实的 Moonshot API
2. **调用真实 API**：使用配置的 API Key 与 Kimi 进行真实对话
3. **智能回复显示**：将 Kimi 的回复实时显示在界面上
4. **其他模型模拟**：如果选择其他模型，则显示模拟回复

### 🔧 技术实现

#### API 配置

- **API 端点**: `https://api.moonshot.cn/v1/chat/completions`
- **模型**: `kimi-k2-0711-preview`
- **API Key**: `sk-D8ZaSoL1WeO2j2eFY1WPGTp2iLh4wxWtOLslyMPwGeWWfnR9`
- **参数配置**:
  - Temperature: 0.7 (控制回复的创造性)
  - Max Tokens: 1000 (最大回复长度)

#### 功能特点

- ✅ **真实 API 调用**：与 Kimi 官方 API 直接通信
- ✅ **错误处理**：完善的网络错误和 API 错误处理
- ✅ **加载状态**：发送时显示加载动画和思考状态
- ✅ **响应式界面**：回复实时显示，支持长文本
- ✅ **多模型支持**：智能切换真实 API 和模拟回复

### 🧪 使用步骤

#### 1. 访问应用

- 打开浏览器访问: http://localhost:5173
- 或点击预览浏览器按钮

#### 2. 选择 Kimi 模型

- 在页面底部找到模型选择下拉框
- 选择 "🌙 Kimi" 选项
- 观察顶部模型信息卡片显示 Kimi 的特色功能

#### 3. 发送消息测试

- 在输入框中输入问题，例如：
  - "你好，请介绍一下你自己"
  - "帮我写一篇关于人工智能的文章大纲"
  - "分析一下当前科技发展趋势"
- 点击发送按钮（或按 Ctrl+Enter）

#### 4. 观察 API 调用过程

1. **发送阶段**：
   - 输入框清空
   - 发送按钮变为加载状态（旋转图标）
   - 显示 "Kimi 正在思考..." 加载卡片

2. **回复阶段**：
   - 加载状态消失
   - 显示 Kimi 的真实回复内容
   - 包含回复时间和交互按钮

### 🎨 界面特色

#### 加载状态

- **发送按钮**：显示旋转加载图标
- **思考提示**：显示 "Kimi 正在思考..."
- **动画效果**：蓝色小点跳跃动画

#### 回复显示

- **模型标识**：显示 Kimi 月亮图标 🌙
- **回复内容**：支持长文本和换行显示
- **时间戳**：显示回复时间
- **交互按钮**：👍 👎 📋 🔄（点赞、点踩、复制、重新生成）

#### 错误处理

- **网络错误**：显示具体错误信息
- **API 错误**：显示 API 状态和错误描述
- **友好提示**：用户友好的错误消息

### 🔍 测试建议

#### 基础功能测试

1. **简单问答**："你好，你是谁？"
2. **长文本生成**："写一篇1000字的科技文章"
3. **专业问题**："解释一下机器学习的基本原理"

#### 模型对比测试

1. 选择 Kimi，发送问题，观察真实 API 回复
2. 切换到 GPT-4，发送相同问题，观察模拟回复
3. 对比回复风格和内容的差异

#### 错误场景测试

1. **网络断开**：断开网络后发送消息
2. **长时间请求**：发送复杂问题测试超时处理
3. **快速连续点击**：测试防重复提交功能

### 🚀 功能亮点

1. **真实 AI 体验**：与 Kimi 官方 API 直接对话
2. **智能模型切换**：根据选择自动切换真实/模拟回复
3. **完善的状态管理**：加载、成功、错误状态完整覆盖
4. **用户体验优化**：流畅的动画和直观的状态反馈
5. **错误恢复机制**：网络问题时的优雅降级处理

### 💡 注意事项

1. **API Key 安全**：当前 API Key 硬编码在前端，生产环境需要后端代理
2. **CORS 策略**：如果遇到跨域问题，可能需要配置代理
3. **请求限制**：注意 API 调用频率限制，避免过度请求
4. **网络依赖**：需要稳定的网络连接才能正常调用 API

---

**现在您可以与真实的 Kimi AI 进行对话了！** 🎉

选择 Kimi 模型，输入问题，体验真正的 AI 智能助手服务！
